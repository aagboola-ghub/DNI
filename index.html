<!DOCTYPE html>

<html lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>Wells Fargo Business Banking - Marchex DNI Demo (Exact Modular)</title>
<!-- Prefer local vendor files; fallback to CDN if not present -->
<link href="./vendor/bootstrap.min.css" onerror="this.onerror=null;this.href='https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css'" rel="stylesheet"/>
<link href="./styles/b4-compat.css" rel="stylesheet"/>
<link href="./styles/wf.css" rel="stylesheet">
<link href="./styles/theme.css" rel="stylesheet"/>
<link href="./assets/icons/wf.ico" rel="icon"/>
</link></head>
<body>
<!-- Marchex Tracking Script Container -->
<div id="marchex-script-container"></div>
<!-- Top Navbar -->
<nav class="navbar navbar-dark wf-navbar">
<div class="container-fluid">
<a class="navbar-brand" href="#">
<div class="stagecoach"></div>
<span class="font-weight-bold">Wells Fargo</span> Business Banking
            </a>
</div>
</nav>
<!-- Progress Bar -->
<div class="progress progress-indicator">
<div class="progress-bar bg-success" id="progress-bar" role="progressbar" style="width: 25%;"></div>
</div>
<!-- Main Content -->
<div class="container-fluid">
<div class="row">
<!-- Left Column: Tracking Data -->
<div class="col-md-4 col-lg-3 p-0 tracking-panel">
<!-- Demo Controls Card -->
<div class="card border-0 rounded-0" id="demo-controls">
<div class="card-header">
<h5 class="mb-0">Demo Controls</h5>
</div>
<div class="card-body">
<div class="mb-3">
<label class="font-weight-bold mb-2">1. Select Traffic Source:</label>
<div class="btn-group btn-group-sm d-flex" role="group">
<button class="btn btn-outline-primary traffic-source-btn active" data-source="google" type="button">Google</button>
<button class="btn btn-outline-primary traffic-source-btn" data-source="facebook" type="button">Facebook</button>
<button class="btn btn-outline-primary traffic-source-btn" data-source="microsoft" type="button">Microsoft</button>
</div>
</div>
<div class="mb-3">
<label class="font-weight-bold mb-2">2. Select Marketing Type:</label>
<div class="btn-group btn-group-sm d-flex" role="group">
<button class="btn btn-outline-primary traffic-source-btn active" data-campaign="paid" type="button">Paid Campaign</button>
<button class="btn btn-outline-primary traffic-source-btn" data-campaign="organic" type="button">Organic Search</button>
</div>
</div>
<div class="mb-3">
<label class="font-weight-bold mb-2">3. Select Tracking Type:</label>
<div class="btn-group btn-group-sm d-flex tracking-type-toggle" role="group">
<button class="btn btn-outline-primary active" data-tracking="session" type="button">
                                    Session Tracking
                                </button>
<button class="btn btn-outline-primary" data-tracking="channel" type="button">
                                    Channel Tracking
                                </button>
</div>
</div>
<button class="btn btn-primary btn-sm btn-block mt-3" id="reset-demo">Reset Demo</button>
</div>
</div>
<div class="card mt-3" id="tracking-details-card">
<div class="card-header py-2"><strong>Call Tracking</strong></div>
<div class="card-body p-0">
<table class="table table-sm mb-0">
<tbody>
<tr><th class="w-25" scope="row">Traffic Source</th><td id="traffic-source">—</td></tr>
<tr><th scope="row">UTM Source</th><td id="utm-source">—</td></tr>
<tr><th scope="row">UTM Medium</th><td id="utm-medium">—</td></tr>
<tr><th scope="row">UTM Campaign</th><td id="utm-campaign">—</td></tr>
<tr><th scope="row">UTM Term</th><td id="utm-term">—</td></tr>
<tr><th scope="row">Click ID</th><td id="click-id">—</td></tr>
<tr><th scope="row">Landing Page</th><td id="landing-page">—</td></tr>
<tr><th scope="row">Original Number</th><td id="original-number">—</td></tr>
<tr><th scope="row">Tracking Number</th>
<td><a href="#" id="tracking-number-link"><span id="tracking-number">—</span></a></td>
</tr>
<tr><th scope="row">Campaign Type</th><td id="campaign-type">—</td></tr>
<tr><th scope="row">Tracking Type</th><td id="tracking-mode">—</td></tr>
</tbody>
</table>
</div>
</div>
<div class="card mt-3" id="call-analytics-card" style="display:none">
<div class="card-header py-2"><strong>Call Analytics</strong></div>
<div class="card-body p-2" id="call-analytics-body">
<div class="text-muted small">Simulate a call to see attribution.</div>
</div>
</div>


</div>
<!-- Right Column: Website Simulation -->
<div class="col-md-8 col-lg-9 p-0 website-panel">
<!-- STEP 1: Google Search Results -->
<div class="p-3" id="search-page">
<div class="page-display">
<i class="fas fa-globe mr-1"></i>
<span id="url-display">www.google.com/search?q=small+business+checking+account</span>
</div>
<div class="form-group">
<div class="input-group mb-3">
<input class="form-control" readonly="readonly" type="text" value="small business checking account"/>
<div class="input-group-append">
<button class="btn wf-search-btn">Search</button>
</div>
</div>
</div>
<div class="search-results">
<div class="card mb-3 wf-ad" id="ad-result" style="cursor: pointer;">
<div class="card-body">
<span class="badge badge-success">Ad</span>
<h5 class="text-primary">Small Business Checking | Wells Fargo</h5>
<div class="text-success">wellsfargo.com/biz/</div>
<p>Open a Business Checking Account with Wells Fargo. Enjoy Online Banking, Mobile App &amp; Trusted Support. Find the Right Account for Your Business Needs.</p>
</div>
</div>
<div class="card mb-3">
<div class="card-body">
<h5 class="text-primary">Best Small Business Checking Accounts of 2025</h5>
<div class="text-success">www.nerdwallet.com/best/banking/business-checking-accounts</div>
<p>Compare the best small business checking accounts from top banks and credit unions. Find options with low fees and great features.</p>
</div>
</div>
<div class="card mb-3">
<div class="card-body">
<h5 class="text-primary">Business Checking Accounts | Bank of America</h5>
<div class="text-success">www.bankofamerica.com/smallbusiness/banking/checking-accounts/</div>
<p>Open a small business checking account from Bank of America. Compare our business checking solutions and find the right checking account for your business.</p>
</div>
</div>
</div>
</div>
<!-- STEP 2: Wells Fargo Main Landing Page -->
<div class="p-3" id="main-landing-page" style="display: none;">
<div class="page-display">
<i class="fas fa-lock mr-1"></i>
<span id="url-display-landing">https://www.wellsfargo.com/biz/</span>
</div>
<div class="nav mb-3 wf-tablist">
<a class="nav-link active" href="#">Home</a>
<a class="nav-link" href="#" id="go-to-checking">Checking</a>
<a class="nav-link" href="#">Savings</a>
<a class="nav-link" href="#">Loans</a>
<a class="nav-link" href="#">Merchant Services</a>
</div>
<div class="jumbotron text-center bg-light">
<h1 class="display-5">Let's Grow Your Business, Together</h1>
<p class="lead">Find the right financial solutions for your business needs.</p>
<button class="btn wf-btn mt-3" id="explore-checking">Explore Business Checking</button>
</div>
<div class="row mt-4">
<div class="col-md-4">
<div class="card mb-3">
<div class="card-body text-center">
<h5>Business Checking</h5>
<p>Choose the right account for your business needs.</p>
<button class="btn wf-btn btn-sm">Learn More</button>
</div>
</div>
</div>
<div class="col-md-4">
<div class="card mb-3">
<div class="card-body text-center">
<h5>Business Credit Cards</h5>
<p>Reward your business spending.</p>
<button class="btn wf-btn btn-sm">Explore Cards</button>
</div>
</div>
</div>
<div class="col-md-4">
<div class="card mb-3">
<div class="card-body text-center">
<h5>Merchant Services</h5>
<p>Accept payments anywhere your business takes you.</p>
<button class="btn wf-btn btn-sm">Get Started</button>
</div>
</div>
</div>
</div>
</div>
<!-- STEP 3: Business Checking Overview Page -->
<div class="p-3" id="checking-overview-page" style="display: none;">
<div class="page-display">
<i class="fas fa-lock mr-1"></i>
<span id="url-display-checking">https://www.wellsfargo.com/biz/checking/</span>
</div>
<div class="nav mb-3 wf-tablist">
<a class="nav-link" href="#" id="back-to-main">Home</a>
<a class="nav-link active" href="#">Checking</a>
<a class="nav-link" href="#">Savings</a>
<a class="nav-link" href="#">Loans</a>
<a class="nav-link" href="#">Merchant Services</a>
</div>
<h2>Small Business Checking Accounts</h2>
<p>Choose the right account for your business needs.</p>
<div class="row mb-4">
<div class="col-md-4">
<div class="card h-100 account-card" id="go-to-initiate" style="cursor: pointer;">
<div class="card-body">
<span class="badge feature-badge mb-2">Basic</span>
<h5 class="card-title">Initiate Business Checking<sup>®</sup> Account</h5>
<p class="card-text">For small businesses with basic banking needs.</p>
<p>$10 monthly service fee, waivable.</p>
<button class="btn wf-btn btn-sm">Learn More</button>
<small class="text-muted d-block mt-2">Click this card to explore Initiate</small>
</div>
</div>
</div>
<div class="col-md-4">
<div class="card h-100 account-card" id="go-to-navigate" style="cursor: pointer;">
<div class="card-body">
<span class="badge feature-badge mb-2">Popular</span>
<h5 class="card-title">Navigate Business Checking<sup>®</sup> Account</h5>
<p class="card-text">For growing businesses with moderate transaction volume.</p>
<p>$25 monthly service fee, waivable.</p>
<button class="btn wf-btn btn-sm">Learn More</button>
<small class="text-muted d-block mt-2">Click this card to explore Navigate</small>
</div>
</div>
</div>
<div class="col-md-4">
<div class="card h-100 account-card" id="go-to-optimize" style="cursor: pointer;">
<div class="card-body">
<span class="badge feature-badge mb-2">Premium</span>
<h5 class="card-title">Optimize Business Checking<sup>®</sup> Account</h5>
<p class="card-text">For established businesses with complex needs.</p>
<p>$75 monthly service fee, waivable with earnings allowance.</p>
<button class="btn wf-btn btn-sm">Learn More</button>
<small class="text-muted d-block mt-2">Click this card to explore Optimize</small>
</div>
</div>
</div>
</div>
<div class="text-center p-3 border rounded">
<p>Questions about business checking? Call our small business specialists:</p>
<h4 class="phone-number" id="overview-number">1-800-416-8658</h4>
<p>Monday - Friday: 8am - 8pm (Central Time)</p>
</div>
</div>
<!-- NEW STEP 4: Product-Specific Page (Initiate) -->
<div class="p-3" id="initiate-page" style="display: none;">
<div class="page-display">
<i class="fas fa-lock mr-1"></i>
<span id="url-display-initiate">https://www.wellsfargo.com/biz/checking/initiate/</span>
</div>
<div class="nav mb-3 wf-tablist">
<a class="nav-link" href="#" id="back-to-main-initiate">Home</a>
<a class="nav-link" href="#" id="back-to-checking-initiate">Checking</a>
<a class="nav-link active" href="#">Initiate Checking Account</a>
<a class="nav-link" href="#">Savings</a>
<a class="nav-link" href="#">Loans</a>
</div>
<h2>Initiate Business Checking<sup>®</sup> Account</h2>
<p>Basic checking designed for small businesses with simple banking needs.</p>
<div class="row">
<div class="col-md-8">
<h4>Account Features</h4>
<ul>
<li>$10 monthly service fee, waivable with $500 minimum daily balance</li>
<li>Up to 100 transactions per month at no charge</li>
<li>Up to $5,000 in cash deposits per month with no cash deposit processing fee</li>
<li>Digital banking tools to manage your business on the go</li>
<li>Debit card with Zero Liability protection</li>
</ul>
<button class="btn wf-btn">Apply Now</button>
<div class="mt-4 p-3 border rounded">
<p>Questions about Initiate Business Checking? Call our specialists:</p>
<h4 class="phone-number" id="initiate-number">1-800-416-8658</h4>
<p>Monday - Friday: 8am - 8pm (Central Time)</p>
</div>
<div class="mt-2 small text-muted">
                                For existing accountholders: <strong>1-800-225-5935</strong>
</div>
<button class="btn btn-outline-primary mt-3 mb-3" id="simulate-call-initiate">
<i class="fas fa-phone mr-1"></i> Simulate Making a Call
                            </button>
</div>
<div class="col-md-4">
</div>
</div>
</div>
<!-- STEP 4: Product-Specific Page (Navigate) -->
<div class="p-3" id="navigate-page" style="display: none;">
<div class="page-display">
<i class="fas fa-lock mr-1"></i>
<span id="url-display-navigate">https://www.wellsfargo.com/biz/checking/navigate/</span>
</div>
<div class="nav mb-3 wf-tablist">
<a class="nav-link" href="#" id="back-to-main-2">Home</a>
<a class="nav-link" href="#" id="back-to-checking">Checking</a>
<a class="nav-link active" href="#">Navigate Checking Account</a>
<a class="nav-link" href="#">Savings</a>
<a class="nav-link" href="#">Loans</a>
</div>
<h2>Navigate Business Checking<sup>®</sup> Account</h2>
<p>A flexible checking account designed for growing businesses.</p>
<div class="row">
<div class="col-md-8">
<h4>Account Features</h4>
<ul>
<li>$25 monthly service fee, waivable with $10,000 minimum balance</li>
<li>Up to 250 transactions per month at no charge</li>
<li>Up to $20,000 in cash deposits per month with no cash deposit processing fee</li>
<li>Free incoming wire transfers</li>
<li>Mobile banking and mobile check deposit</li>
</ul>
<button class="btn wf-btn">Apply Now</button>
<div class="mt-4 p-3 border rounded">
<p>Questions about Navigate Business Checking? Call our specialists:</p>
<h4 class="phone-number" id="navigate-number">1-800-416-8658</h4>
<p>Monday - Friday: 8am - 8pm (Central Time)</p>
</div>
<div class="mt-2 small text-muted">
                                For existing accountholders: <strong>1-800-225-5935</strong>
</div>
<button class="btn btn-outline-primary mt-3 mb-3" id="simulate-call">
<i class="fas fa-phone mr-1"></i> Simulate Making a Call
                            </button>
</div>
<div class="col-md-4">
</div>
</div>
</div>
<!-- STEP 4 Alternative: Product-Specific Page (Optimize) -->
<div class="p-3" id="optimize-page" style="display: none;">
<div class="page-display">
<i class="fas fa-lock mr-1"></i>
<span id="url-display-optimize">https://www.wellsfargo.com/biz/checking/optimize/</span>
</div>
<div class="nav mb-3 wf-tablist">
<a class="nav-link" href="#" id="back-to-main-3">Home</a>
<a class="nav-link" href="#" id="back-to-checking-2">Checking</a>
<a class="nav-link active" href="#">Optimize Checking Account</a>
<a class="nav-link" href="#">Savings</a>
<a class="nav-link" href="#">Loans</a>
</div>
<h2>Optimize Business Checking<sup>®</sup> Account</h2>
<p>Premium checking with advanced treasury management features.</p>
<div class="row">
<div class="col-md-8">
<h4>Premium Features</h4>
<ul>
<li>$75 monthly maintenance fee with earnings allowance</li>
<li>Access to treasury management services</li>
<li>No fees for stop payments, cashier's checks, and money orders</li>
<li>Up to five outgoing wires per statement period at no charge</li>
<li>Relationship pricing on business loans and lines of credit</li>
</ul>
<button class="btn wf-btn">Apply Now</button>
<div class="mt-4 p-3 border rounded">
<p>Questions about Optimize Business Checking? Call our premium business specialists:</p>
<h4 class="phone-number" id="optimize-number">1-866-902-9181</h4>
<p>Monday - Friday: 8am - 8pm (Central Time)</p>
</div>
<div class="mt-2 small text-muted">
                                For existing accountholders: <strong>1-800-225-5935</strong>
</div>
<button class="btn btn-outline-primary mt-3 mb-3" id="simulate-call-optimize">
<i class="fas fa-phone mr-1"></i> Simulate Making a Call
                            </button>
</div>
<div class="col-md-4">
</div>
</div>
</div>
</div>
</div>
</div>
<!-- Call Made Modal -->
<div aria-hidden="true" aria-labelledby="callMadeModalLabel" class="modal fade modal-marchex" id="callMadeModal" role="dialog" tabindex="-1">
<div class="modal-dialog" role="document">
<div class="modal-content">
<div class="modal-header">
<h5 class="modal-title" id="callMadeModalLabel">Call Successfully Tracked</h5>
<button aria-label="Close" class="close" data-dismiss="modal" type="button">
<span aria-hidden="true">×</span>
</button>
</div>
<div class="modal-body">
<div class="text-center mb-3">
<i class="fas fa-check-circle text-success" style="font-size: 48px;"></i>
<h5 class="mt-3">Call Successfully Tracked by Marchex</h5>
</div>
<p>A call to the tracking number has been simulated. All the session data captured during this customer journey has been attached to the call record.</p>
<p>The complete customer journey from <span id="modal-source">Google Ads</span> through the Wells Fargo website to phone call has been tracked and logged.</p>
<div class="alert alert-light border">
<small>View call details in the "Call Data" tab in the tracking panel.</small>
</div>
</div>
<div class="modal-footer">
<button class="btn btn-primary" data-dismiss="modal" type="button">Close</button>
</div>
</div>
</div>
</div>
<!-- Font Awesome for icons -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/js/all.min.js"></script>
<!-- jQuery and Bootstrap JS -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/4.6.0/js/bootstrap.bundle.min.js"></script>
<script>
        // Function to load the Marchex tracking script
        function loadMarchexTrackingScript(isAdClick) {
            // Clear any existing scripts
            $('#marchex-script-container').empty();
            
            // First set the demo referrer to match the actual traffic source
            localStorage.setItem('demoReferrer', trackingData.source);
            
            // Create the script element
            const script = document.createElement('script');
            script.type = 'text/javascript';
            script.async = true;
            script.src = '//js.web-2-tel.com/sdk?identifier=7161e16912d84f29bf318e6e6e29d07f';
            
            // Add script to container
            document.getElementById('marchex-script-container').appendChild(script);
            
            // Log the activation (for demo purposes)
            console.log('Marchex tracking activated:', {
                source: trackingData.source,
                type: isAdClick ? 'Paid Search' : 'Organic Search',
                clickId: trackingData.clickId,
                campaign: trackingData.utmCampaign
            });
        }
        
        // Generate random tracking numbers in the format 800-XXX-XXXX
        function generateTrackingNumber() {
            var middle = Math.floor(Math.random() * 900) + 100;
            var last = Math.floor(Math.random() * 9000) + 1000;
            return '800-' + middle + '-' + last;
        }
        
        // Generate random session ID
        function generateSessionId(source, campaign) {
            const randomNum = Math.floor(Math.random() * 100000);
            const date = new Date();
            const year = date.getFullYear();
            const month = String(date.getMonth() + 1).padStart(2, '0');
            const day = String(date.getDate()).padStart(2, '0');
            
            let prefix = "WF_";
            if (campaign === "paid") {
                prefix += "SEM_";
            } else {
                prefix += "ORG_";
            }
            
            return `${prefix}${year}_${month}_${day}_${randomNum}`;
        }
        
        // Generate click IDs for different platforms
        function generateClickId(source) {
            const random = Math.random().toString(36).substring(2, 15);
            
            switch(source) {
                case 'google':
                    return `gclid=Cj0KCQjwrMKmBhD0ARIsAKcl6jdP${random}`;
                case 'facebook':
                    return `fbclid=IwAR2DfN7Zd5qSdD_${random}`;
                case 'microsoft':
                    return `msclkid=7f31a8d${random}`;
                default:
                    return '';
            }
        }
        
        // Object to store tracking data
        let trackingData = {
            sessionId: '',
            source: 'google',
            campaign: 'paid',
            trackingType: 'session',
            trackingNumber: '',
            trackingNumberPremium: '',
            currentPage: 'search',
            clickId: '',
            utmSource: 'google',
            utmMedium: 'cpc',
            utmCampaign: 'bizbanking_2025_q2',
            utmTerm: 'small business checking account'
        };
        
        // Update the tracking data table
        function updateTrackingData() {
            // Session data
            $('#session-id').text(trackingData.sessionId);
            $('#traffic-source').text(trackingData.source);
            
            // Campaign data
            if (trackingData.campaign === 'paid') {
                $('#utm-source').text(trackingData.source);
                $('#utm-medium').text('cpc');
                $('#utm-campaign').text('bizbanking_2025_q2');
                $('#utm-term').text('small business checking account');
                $('#campaign-type').text('Paid Search');
                $('.campaign-data-row').show();
            } else {
                $('#utm-source').text(trackingData.source);
                $('#utm-medium').text('organic');
                $('#utm-campaign').text('(not set)');
                $('#utm-term').text('(not set)');
                $('#campaign-type').text('Organic Search');
                $('.campaign-data-row').show();
            }
            
            // Click ID
            if (trackingData.campaign === 'paid') {
                $('#click-id').text(trackingData.clickId);
            } else {
                $('#click-id').text('(not set)');
            }
            
            // Page and tracking number
            switch(trackingData.currentPage) {
                case 'search':
                    $('#current-page').text('Google Search Results');
                    $('#original-number').text('Not yet visible');
                    $('#tracking-number').text('Not yet assigned');
                    $('#dni-rule-pattern').text('No active replacement');
                    $('#current-stage').text('Stage: Initial Search');
                    break;
                case 'landing':
                    $('#current-page').text('wellsfargo.com/biz/');
                    $('#original-number').text('Not visible on page');
                    $('#tracking-number').text('Not yet assigned');
                    $('#dni-rule-pattern').text('No active replacement');
                    $('#current-stage').text('Stage: Landing Page');
                    break;
                case 'checking':
                    $('#current-page').text('wellsfargo.com/biz/checking/');
                    $('#original-number').text('1-800-416-8658');
                    $('#tracking-number').text(trackingData.trackingNumber);
                    $('#dni-rule-pattern').text('Rule matched: */checking/ → Replace 1-800-416-8658 with tracking number');
                    $('#current-stage').text('Stage: Checking Overview');
                    break;
                case 'initiate':
                    $('#current-page').text('wellsfargo.com/biz/checking/initiate/');
                    $('#original-number').text('1-800-416-8658');
                    $('#tracking-number').text(trackingData.trackingNumber);
                    $('#dni-rule-pattern').text('Rule matched: */checking/initiate/ → Replace 1-800-416-8658 with tracking number');
                    $('#current-stage').text('Stage: Initiate Product Page');
                    break;
                case 'navigate':
                    $('#current-page').text('wellsfargo.com/biz/checking/navigate/');
                    $('#original-number').text('1-800-416-8658');
                    $('#tracking-number').text(trackingData.trackingNumber);
                    $('#dni-rule-pattern').text('Rule matched: */checking/navigate/ → Replace 1-800-416-8658 with tracking number');
                    $('#current-stage').text('Stage: Navigate Product Page');
                    break;
                case 'optimize':
                    $('#current-page').text('wellsfargo.com/biz/checking/optimize/');
                    $('#original-number').text('1-866-902-9181');
                    $('#tracking-number').text(trackingData.trackingNumberPremium);
                    $('#dni-rule-pattern').text('Rule matched: */checking/optimize/ → Replace 1-866-902-9181 with tracking number');
                    $('#current-stage').text('Stage: Optimize Product Page');
                    break;
            }
            
            // Update progress bar based on current page
            updateProgressBar();
        }
        
        // Update the progress bar
        function updateProgressBar() {
            let progressWidth = "25%";
            
            switch(trackingData.currentPage) {
                case 'search':
                    progressWidth = "25%";
                    break;
                case 'landing':
                    progressWidth = "50%";
                    break;
                case 'checking':
                    progressWidth = "75%";
                    break;
                case 'initiate':
                case 'navigate':
                case 'optimize':
                    progressWidth = "100%";
                    break;
            }
            
            $('#progress-bar').css('width', progressWidth);
        }
        
        // Update the displayed phone numbers
        function updatePhoneNumbers() {
            if (trackingData.currentPage === 'checking' || trackingData.currentPage === 'navigate' || trackingData.currentPage === 'initiate') {
                $('#overview-number').text(trackingData.trackingNumber);
                $('#navigate-number').text(trackingData.trackingNumber);
                $('#initiate-number').text(trackingData.trackingNumber);
            } else if (trackingData.currentPage === 'optimize') {
                $('#optimize-number').text(trackingData.trackingNumberPremium);
            }
        }
        
        // Initialize all tracking data
        function initializeTrackingData() {
            // Generate new tracking numbers
            trackingData.trackingNumber = generateTrackingNumber();
            trackingData.trackingNumberPremium = generateTrackingNumber();
            
            // Set defaults
            trackingData.currentPage = 'search';
            
            // Generate new session ID and click ID
            trackingData.sessionId = generateSessionId(trackingData.source, trackingData.campaign);
            trackingData.clickId = generateClickId(trackingData.source);
            
            // Set initial referrer to match the source (for Marchex)
            localStorage.setItem('demoReferrer', trackingData.source);
            
            // Update display
            updateTrackingData();
        }
        
        // Reset the demo
        function resetDemo() {
            // Reset page displays
            $('#search-page').show();
            $('#main-landing-page').hide();
            $('#checking-overview-page').hide();
            $('#initiate-page').hide();
            $('#navigate-page').hide();
            $('#optimize-page').hide();
            
            // Reset call info
            $('#call-info').hide();
            
            // Clear Marchex script container
            $('#marchex-script-container').empty();
            
            // Initialize new tracking data
            initializeTrackingData();
        }
        
        // Switch tracking panel tabs
        function switchTab(tabId) {
            // Hide all tab contents
            $('.panel-tab-content').removeClass('active');
            
            // Show the selected tab content
            $(tabId).addClass('active');
            
            // Update active tab
            $('.wf-tablist .nav-link').removeClass('active');
            $(`a[href="${tabId}"]`).addClass('active');
        }
        
        // Show call data after simulated call
        function showCallData(productPage) {
            // Update call analytics data
            const date = new Date();
            const formattedDate = date.toLocaleDateString('en-US', { 
                month: 'short', 
                day: 'numeric', 
                year: 'numeric',
                hour: 'numeric',
                minute: 'numeric',
                hour12: true
            });
            
            $('#call-timestamp').text(formattedDate);
            $('#call-duration').text('4:28');
            
            if (trackingData.campaign === 'paid') {
                $('#call-source').text(trackingData.source.charAt(0).toUpperCase() + trackingData.source.slice(1) + ' Ads');
                $('#call-campaign').text('bizbanking_2025_q2');
                $('#call-keyword').text('small business checking account');
            } else {
                $('#call-source').text('Organic ' + trackingData.source.charAt(0).toUpperCase() + trackingData.source.slice(1));
                $('#call-campaign').text('(not set)');
                $('#call-keyword').text('(not set)');
            }
            
            $('#call-landing').text('wellsfargo.com/biz/checking/' + productPage + '/');
            
            // Product-specific call data customization
            if (productPage === 'optimize') {
                // Show premium business insights for Optimize calls
                $('#optimize-insights').show();
                
                // Update sentiment and summary for premium service
                $('#customer-sentiment').width('92%').text('Very Positive');
                $('#agent-performance').width('95%');
                $('#sentiment-details').html('<span class="badge badge-success mr-1">Key Positives:</span> Personalized service, comprehensive explanations, excellent rapport');
                
                // Update summary for Optimize
                // Update premium insights
                $('#business-context').text('Established manufacturing business with international operations and $4.2M annual revenue. Seeking improved treasury management.');
                $('#cross-sell').text('Business credit line (94% match), international services (88% match), merchant services (76% match)');
            } else if (productPage === 'initiate') {
                // Hide premium insights section
                $('#optimize-insights').hide();
                
                // Update sentiment and summary for basic service
                $('#customer-sentiment').width('78%').text('Positive');
                $('#agent-performance').width('85%').text('Good');
                $('#sentiment-details').html('<span class="badge badge-success mr-1">Key Positives:</span> Clear explanations, patience with questions');
                
                // Update summary for Initiate
                } else {
                // Navigate page - default call data
                $('#optimize-insights').hide();
                
                // Reset to default values
                $('#customer-sentiment').width('85%').text('Positive');
                $('#agent-performance').width('92%').text('Excellent');
                $('#sentiment-details').html('<span class="badge badge-success mr-1">Key Positives:</span> Solution-focused, helpful explanations, good rapport');
                
                // Default summary
                }
            
            // Show call info panel
            $('#call-info').show();
            
            // Switch to call data tab
            switchTab('#call-data');
            
            // Update modal source
            if (trackingData.campaign === 'paid') {
                $('#modal-source').text(trackingData.source.charAt(0).toUpperCase() + trackingData.source.slice(1) + ' Ads');
            } else {
                $('#modal-source').text('Organic ' + trackingData.source.charAt(0).toUpperCase() + trackingData.source.slice(1));
            }
            
            // Show modal
            $('#callMadeModal').modal('show');
        }
        
        // Document ready function
        $(document).ready(function() {
            // Initialize the demo
            initializeTrackingData();
            
            // Ad click goes to main landing page and loads Marchex tracking script
            $('#ad-result').on('click', function() {
                // Load the Marchex tracking (for paid search)
                loadMarchexTrackingScript(true);  // true = paid search
                
                $('#search-page').hide();
                $('#main-landing-page').show();
                trackingData.currentPage = 'landing';
                updateTrackingData();
            });
            
            // Main page to checking overview
            $('#go-to-checking, #explore-checking').on('click', function() {
                $('#main-landing-page').hide();
                $('#checking-overview-page').show();
                trackingData.currentPage = 'checking';
                updateTrackingData();
                updatePhoneNumbers();
            });
            
            // Back to main page
            $('#back-to-main').on('click', function() {
                $('#checking-overview-page').hide();
                $('#main-landing-page').show();
                trackingData.currentPage = 'landing';
                updateTrackingData();
            });
            
            // To Initiate product page
            $('#go-to-initiate').on('click', function() {
                $('#checking-overview-page').hide();
                $('#initiate-page').show();
                trackingData.currentPage = 'initiate';
                updateTrackingData();
                updatePhoneNumbers();
            });
            
            // To Navigate product page
            $('#go-to-navigate').on('click', function() {
                $('#checking-overview-page').hide();
                $('#navigate-page').show();
                trackingData.currentPage = 'navigate';
                updateTrackingData();
                updatePhoneNumbers();
            });
            
            // To Optimize product page
            $('#go-to-optimize').on('click', function() {
                $('#checking-overview-page').hide();
                $('#optimize-page').show();
                trackingData.currentPage = 'optimize';
                updateTrackingData();
                updatePhoneNumbers();
            });
            
            // Back to checking overview from Initiate
            $('#back-to-checking-initiate').on('click', function() {
                $('#initiate-page').hide();
                $('#checking-overview-page').show();
                trackingData.currentPage = 'checking';
                updateTrackingData();
            });
            
            // Back to main from Initiate
            $('#back-to-main-initiate').on('click', function() {
                $('#initiate-page').hide();
                $('#main-landing-page').show();
                trackingData.currentPage = 'landing';
                updateTrackingData();
            });
            
            // Back to checking overview from Navigate
            $('#back-to-checking').on('click', function() {
                $('#navigate-page').hide();
                $('#checking-overview-page').show();
                trackingData.currentPage = 'checking';
                updateTrackingData();
            });
            
            // Back to checking overview from Optimize
            $('#back-to-checking-2').on('click', function() {
                $('#optimize-page').hide();
                $('#checking-overview-page').show();
                trackingData.currentPage = 'checking';
                updateTrackingData();
            });
            
            // Back to main from Navigate
            $('#back-to-main-2').on('click', function() {
                $('#navigate-page').hide();
                $('#main-landing-page').show();
                trackingData.currentPage = 'landing';
                updateTrackingData();
            });
            
            // Back to main from Optimize
            $('#back-to-main-3').on('click', function() {
                $('#optimize-page').hide();
                $('#main-landing-page').show();
                trackingData.currentPage = 'landing';
                updateTrackingData();
            });
            
            // Simulate making a call from Navigate
            $('#simulate-call').on('click', function() {
                showCallData('navigate');
            });
            
            // Simulate making a call from Initiate
            $('#simulate-call-initiate').on('click', function() {
                showCallData('initiate');
            });
            
            // Simulate making a call from Optimize
            $('#simulate-call-optimize').on('click', function() {
                showCallData('optimize');
            });
            
            // Reset demo
            $('#reset-demo').on('click', function() {
                resetDemo();
            });
            
            // Switch tabs
            $('#session-tab').on('click', function(e) {
                e.preventDefault();
                switchTab('#session-data');
            });
            
            $('#dni-tab').on('click', function(e) {
                e.preventDefault();
                switchTab('#dni-data');
            });
            
            $('#call-tab').on('click', function(e) {
                e.preventDefault();
                switchTab('#call-data');
            });
            
            // Traffic source buttons
            $('.traffic-source-btn[data-source]').on('click', function() {
                // Update active state
                $('.traffic-source-btn[data-source]').removeClass('active');
                $(this).addClass('active');
                
                // Update tracking data
                trackingData.source = $(this).data('source');
                trackingData.utmSource = trackingData.source;
                trackingData.clickId = generateClickId(trackingData.source);
                trackingData.sessionId = generateSessionId(trackingData.source, trackingData.campaign);
                
                // Update localStorage with the new source
                localStorage.setItem('demoReferrer', trackingData.source);
                
                // If Marchex script is already loaded, reload it with the new source
                if ($('#marchex-script-container').children().length > 0) {
                    const isPaid = trackingData.campaign === 'paid';
                    loadMarchexTrackingScript(isPaid);
                }
                
                // Update display
                updateTrackingData();
            });
            
            // Campaign type buttons
            $('.traffic-source-btn[data-campaign]').on('click', function() {
                // Update active state
                $('.traffic-source-btn[data-campaign]').removeClass('active');
                $(this).addClass('active');
                
                // Update tracking data
                trackingData.campaign = $(this).data('campaign');
                trackingData.sessionId = generateSessionId(trackingData.source, trackingData.campaign);
                
                if (trackingData.campaign === 'organic') {
                    trackingData.utmMedium = 'organic';
                    trackingData.utmCampaign = '(not set)';
                    trackingData.utmTerm = '(not set)';
                } else {
                    trackingData.utmMedium = 'cpc';
                    trackingData.utmCampaign = 'bizbanking_2025_q2';
                    trackingData.utmTerm = 'small business checking account';
                }
                
                // Load appropriate Marchex tracking based on campaign type
                const isPaid = trackingData.campaign === 'paid';
                loadMarchexTrackingScript(isPaid);
                
                // Update display
                updateTrackingData();
            });
            
            // Tracking type toggle
            $('.tracking-type-toggle .btn').on('click', function() {
                // Update active state
                $('.tracking-type-toggle .btn').removeClass('active');
                $(this).addClass('active');
                
                // Update tracking data
                trackingData.trackingType = $(this).data('tracking');
                
                // If using channel tracking, use the same number for both premium and regular
                if (trackingData.trackingType === 'channel') {
                    trackingData.trackingNumberPremium = trackingData.trackingNumber;
                } else {
                    // For session tracking, generate a different number
                    trackingData.trackingNumberPremium = generateTrackingNumber();
                }
                
                // Update display
                updateTrackingData();
                updatePhoneNumbers();
            });
        });
    </script>
<!-- Vendor JS: local first, CDN fallback -->
<script onerror="this.onerror=null;this.src='https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js'" src="./vendor/bootstrap.bundle.min.js"></script>
<!-- App (ES modules, no jQuery) -->
<script src="./scripts/app.js" type="module"></script>
</body>
</html>
